pandoc-opml
===========

pandoc-opml generates [OPML] files from [Markdown] with the help of [pandoc].

[OPML]: http://dev.opml.org/spec2.html
[Markdown]: http://johnmacfarlane.net/pandoc/README.html#pandocs-markdown
[pandoc]: http://johnmacfarlane.net/pandoc/

Demo
----

Imagine this Markdown document:

```markdown
---
title: Demo Document
author: Eric Davis
---

# Hello World!

This is a child of the "Hello World!" header.
```

After running it through `pandoc-opml`, you'd have this OPML document:

```xml
<?xml version="1.0" encoding="UTF-8"?>
<opml version="2.0">
  <!-- OPML generated by pandoc-opml v0.1 on Tue, 13 Jan 2015 04:21:33 GMT -->
  <head>
    <title>Demo Document</title>
    <ownerName>Eric Davis</ownerName>
    <dateModified>Tue, 13 Jan 2015 04:21:33 GMT</dateModified>
    <generator>https://github.com/edavis/pandoc-opml</generator>
    <docs>http://dev.opml.org/spec2.html</docs>
  </head>
  <body>
    <outline level="1" name="hello-world" text="Hello World!">
      <outline text="This is a child of the &quot;Hello World!&quot; header."/>
    </outline>
  </body>
</opml>
```

Alright, so I've taken the simplicity of Markdown and turned it into a
jumble of XML. What's so great about this?

Well, think of what an XML version of your Markdown now enables.

Say you wanted to grab all level 1 and level 2 headlines from a
Markdown document to put together a table of contents.

All the widely used Markdown libraries seem to focus primarily on
transforming Markdown into HTML, so no help there. Beyond that, you
could try writing a regex to extract the headers but [that path is
brittle and a bit of a hassle][jwz].

What if instead you could transform your Markdown into XML and gain
with it all the tools and libraries that natively work with XML? Then
your "grab all level 1 and level 2 headers" task would be a breeze.

pandoc-opml is the tool to transform your Markdown into OPML, the XML
dialect widely used for storing hierarchical documents.

[jwz]: http://blog.codinghorror.com/regular-expressions-now-you-have-two-problems/

Installation
------------

I'll eventually toss this up on PyPI, but for now:

```bash
$ pip install https://github.com/edavis/pandoc-opml
```

The only external requirement is [pandoc].

Running
-------

```bash
$ pandoc-opml [-o <output.opml>] <input.txt>
```

If `-o/--output` is not provided, the output is written to stdout.

Spec
----

- Follows OPML v2.0 spec
- Includes level header on header elements
- Includes ordered or unordered on list items
- Includes ordinal attribute on ordered list specifying the ordinal number of the list item
- description, if included, is added to head
- date maps to dateCreated, dateModified is the current GMT
- HTML encoding is done if encountered

Background
----------

I've long been interested in OPML as a file format, but I was always
more comfortable using a text editor than any of the available OPML
editors.

So I started toying with the idea of using a regular text editor and
exporting plain text files to OPML instead of editing OPML
directly.

I knew the hardest part was going to be parsing the plain text input
files. Looking for alternatives to writing that code myself, I found
pandoc and was thrilled to see it provided access to the abstract
syntax tree (AST) that represented the input file's headers,
paragraphs, list items, etc. Plus, by using pandoc, I could write the
input files in any of the [many file formats it understands][inputs].

[inputs]: http://johnmacfarlane.net/pandoc/README.html#description
